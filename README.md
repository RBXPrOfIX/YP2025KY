# Lyrics Insight üéµ

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤ –ø–µ—Å–µ–Ω –∏ –ø–æ–∏—Å–∫–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ —Å—Ö–æ–∂–∏—Ö —Ç—Ä–µ–∫–æ–≤**

[![Python](https://img.shields.io/badge/Python-3.9%2B-blue)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/Framework-FastAPI-green)](https://fastapi.tiangolo.com/)
[![PyQt5](https://img.shields.io/badge/UI-PyQt5-orange)](https://riverbankcomputing.com/software/pyqt/)

---

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ
Lyrics Insight –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–∞ FastAPI –∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞ PyQt5 –¥–ª—è —Å–±–æ—Ä–∞, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤ –ø–µ—Å–µ–Ω. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç—ã —á–µ—Ä–µ–∑ API Genius –∏ Last.fm, –≤—ã—á–∏—Å–ª—è–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏, –≥–ª—É–±–æ–∫—É—é —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É –∏ —Ç–µ–º—ã, –∞ –∑–∞—Ç–µ–º –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ –ø–æ —Å–º—ã—Å–ª—É —Ç—Ä–µ–∫–∏.

---

## üåü –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–°–±–æ—Ä —Ç–µ–∫—Å—Ç–∞ –ø–µ—Å–µ–Ω**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Genius –∏ Last.fm API
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏**: AES-GCM (–ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É AES-256) –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑**: —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –æ—Ç Hugging Face –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å DeepEmotion
- **–ú–µ—Ç—Ä–∏–∫–∏ —Å—Ö–æ–¥—Å—Ç–≤–∞**: –∫–æ—Å–∏–Ω—É—Å–Ω–∞—è —Å—Ö–æ–∂–µ—Å—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏ SBERT
- **–≠–∫—Å—Ç—Ä–∞–∫—Ü–∏—è —Ç–µ–º**: –ª–µ–∫—Å–∏–∫–æ-—Å—Ç–µ–º–º–æ–≤–∞—è –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ-–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ø—É–ª –≤–æ—Ä–∫–µ—Ä–æ–≤ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏
- **–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Docker**: –µ–¥–∏–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `docker-compose`

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç      | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏                                 |
|----------------|--------------------------------------------|
| **–°–µ—Ä–≤–µ—Ä**     | FastAPI, Uvicorn, SQLAlchemy, Alembic       |
| **–ö–ª–∏–µ–Ω—Ç**     | PyQt5, Requests, QThread                    |
| **NLP & ML**   | Transformers, Sentence-Transformers, SciPy   |
| **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** | Cryptography (AESGCM)                       |
| **–ë–î**         | SQLite                                      |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | PyTest, Locust                             |
| **–î–µ–ø–ª–æ–π**     | Docker, Docker Compose                      |

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
   ```powershell
   git clone https://github.com/–í–ê–®_–ü–†–û–§–ò–õ–¨/lyrics-insight.git
   cd lyrics-insight
   ```
2. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   ```powershell
   python -m venv .venv
   .\.venv\Scripts\Activate.ps1
   pip install -r requirements.env.txt
   ```
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è**
   ```powershell
   $bytes = New-Object Byte[] 32
   (New-Object System.Security.Cryptography.RNGCryptoServiceProvider).GetBytes($bytes)
   [Convert]::ToBase64String($bytes)
   ```
   –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–∞–π–ª `.env`:
   ```dotenv
   ENC_KEY_B64=<–≤–∞—à_KEY>
   DATABASE_URL=sqlite:///./database.db
   GENIUS_TOKEN=<–≤–∞—à_Genius_API_token>
   LASTFM_API_KEY=<–≤–∞—à_LastFM_API_key>
   ```
4. **–ü–æ–ª—É—á–µ–Ω–∏–µ API —Ç–æ–∫–µ–Ω–æ–≤**
   - [Genius API](https://genius.com/api-clients)
   - [Last.fm API](https://www.last.fm/api/account/create)

---

## üöÄ –ó–∞–ø—É—Å–∫

### –° Docker

```powershell
docker-compose build
docker-compose up -d
``` 
–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`.

```powershell
docker-compose logs -f   # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose down      # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

**–°–µ—Ä–≤–µ—Ä** (–±–µ–∑ Docker):
```powershell
cd server
pip install -r ../requirements_server.txt
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

**–ö–ª–∏–µ–Ω—Ç**:
```powershell
cd client
pip install -r requirements.txt
python main.py
```

---

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | URL           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|-------|---------------|--------------------------------------|
| POST  | `/get_lyrics` | –ü–æ–ª—É—á–∏—Ç—å –ª–∏—Ä–∏–∫—É –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–∞   |
| POST  | `/find_similar` | –ù–∞–π—Ç–∏ 5 —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Ö–æ–∂–∏—Ö —Ç—Ä–µ–∫–æ–≤ |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞** (—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π payload):
```json
POST http://localhost:8000/get_lyrics
{
  "data": "<encrypted_token>"
}
```

---

## üñ• –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

![GUI Demo](media/gui_demo.png)

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python main.py` –∏–∑ –ø–∞–ø–∫–∏ `client`.
2. –í–≤–µ–¥–∏—Ç–µ **–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞** –∏ **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è**, –Ω–∞–∂–º–∏—Ç–µ **–ù–∞–π—Ç–∏ —Ç–µ–∫—Å—Ç**.
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–µ—Å–Ω–∏ –∏ —Å–ø–∏—Å–æ–∫ —Å—Ö–æ–∂–∏—Ö —Ç—Ä–µ–∫–æ–≤.
4. –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ —Ç—Ä–µ–∫—É –æ—Ç–∫—Ä–æ–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ.

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

- **–ê–ª–≥–æ—Ä–∏—Ç–º**: AES-GCM (AES-256)
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
  ```python
  from cryptography.hazmat.primitives.ciphers.aead import AESGCM
  aesgcm = AESGCM(key)
  encrypted = aesgcm.encrypt(iv, payload, None)
  ```
- –ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `.env`, –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ Git.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lyrics-insight/
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ populate_random.py
‚îú‚îÄ‚îÄ requirements.env.txt
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ client/
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ api_worker.py
‚îÇ   ‚îú‚îÄ‚îÄ crypto.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ media/                # —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –¥–µ–º–æ GUI
```

---

*–° –ª—é–±–æ–≤—å—é –∫ –º—É–∑—ã–∫–µ –∏ –∫–æ–¥—É!*

